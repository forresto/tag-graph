<!DOCTYPE html>
<html>
  <head>
    <title>TagGraph dynamic mindmap custom element</title>
    <meta charset="utf-8">
    <script src="../bower_components/polymer/polymer.min.js"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  </head>
  <body style="margin:0; overflow:hidden;">

    <link rel="import" href="tag-graph/tag-graph.html">
    <tag-graph id="tag-graph-v-1" width="1000" height="400">
      <div data-tags="hello taggraph">ahoy</div>
      <div>#Hello #world testing 123.</div>
      <div data-tags="datatag">both #hashtag and datatag</div>
    </tag-graph>

    <form id="add-form" action="#" style="position:absolute; bottom:10px; left:100px;">
      <input id="add-input" type="text" value="#hello taggraph" style="width:500px; font-size:150%;"></input>
      <button type="submit" style="font-size:150%;">add</button>
    </form>

    <div id="loading" style="position:absolute; top:10px; left:10px; background-color:white; padding:10px; border-radius:5px;">
      <div id="loading-message">loading custom elements...</div>
    </div>

    <script type="text/javascript">
    (function(){

      var tagGraph = document.getElementById("tag-graph-v-1");

      // GSS.worker = '../bower_components/gss/browser/gss-solver.min.js'
      Polymer.veiledElements = ["the-graph-editor"];
      window.addEventListener('WebComponentsReady', function() {
        // Remove loading message
        var loading = document.getElementById("loading");
        loading.parentNode.removeChild(loading);
      });

      function resize () {
        tagGraph.setAttribute("width", window.innerWidth);
        tagGraph.setAttribute("height", window.innerHeight);
      }
      window.addEventListener('resize', resize);
      resize();

      var form = document.getElementById("add-form");
      var input = document.getElementById("add-input");
      form.onsubmit = function (event) {
        var div = document.createElement("div");
        div.textContent = input.value;
        tagGraph.appendChild(div);
        input.value = "#random " + Math.floor(Math.random()*1000000000).toString(36);

        return false;
      };


    }());
    </script>
  </body>
</html>
